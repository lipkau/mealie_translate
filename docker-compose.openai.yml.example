services:
  mealie-translator:
    image: ghcr.io/lipkau/mealie_translate:latest
    environment:
      # Required: Your Mealie server details
      - MEALIE_BASE_URL=https://your-mealie-instance.com
      - MEALIE_API_TOKEN=your-mealie-api-token

      # Translation Provider Configuration
      # Choose between 'openai' (cloud) or 'ollama' (local)
      - TRANSLATOR_PROVIDER=openai

      # OpenAI Configuration (required if TRANSLATOR_PROVIDER=openai)
      - OPENAI_API_KEY=your-openai-api-key
      - OPENAI_MODEL=gpt-4o-mini

      # Ollama Configuration (required if TRANSLATOR_PROVIDER=ollama)
      # - OLLAMA_BASE_URL=http://ollama:11434
      # - OLLAMA_MODEL=llama2
      # - OLLAMA_TIMEOUT=60

      # Processing Configuration
      - CRON_SCHEDULE=0 */6 * * * # Every 6 hours
      - TARGET_LANGUAGE=English
      - BATCH_SIZE=10
      - MAX_RETRIES=3
      - RETRY_DELAY=1

      # Dry Run Configuration
      # - DRY_RUN=false
      # - DRY_RUN_LIMIT=5

      # Optional: Logging level (default: INFO)
      # - LOG_LEVEL=INFO

    restart: unless-stopped

    # Optional: Mount logs directory for persistent logging
    # volumes:
    #   - ./logs:/var/log

  # Optional: Local Ollama service for AI translation
  # Uncomment this section if using TRANSLATOR_PROVIDER=ollama
  # ollama:
  #   image: ollama/ollama:latest
  #   ports:
  #     - "11434:11434"
  #   volumes:
  #     - ollama-data:/root/.ollama
  #   environment:
  #     - OLLAMA_ORIGINS=*
  #   restart: unless-stopped
# volumes:
#   ollama-data:
